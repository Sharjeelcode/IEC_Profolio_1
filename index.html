<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinTrackr</title>
    <link rel="stylesheet" href="./src/style.css">
    <link rel="icon" href="assts/fav-removebg-preview.png">
</head>
<style>
    main {
        background-image: url(assts/dd.avif);
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center center;
    }

    .signup_form {
        backdrop-filter: blur(10px);
        background-color: rgba(255, 255, 255, 0.362);
    }
</style>

<body>
    <nav
        class="h-12  flex justify-between z-50 items-center sticky text-white top-0 bg-gray-900 shadow-sm shadow-white">
        <div class="flex items-center ml-2">
            <img class="h-12" src="../assts/app logo.png" alt="">
            <h1 class=" md:text-lg font-bold md:block">FinTrackr</h1>
        </div>
        <div class="mr-2 md:mr-6 font-bold text-lg shadow-lg bg-[#0A6CFF] p-1 rounded text-white">
            <a href="src/signin.html" class="">SignIn</a>
        </div>
    </nav>
    <main class="flex justify-center items-center h-[95vh]">
        <div class="signup_form  m-4 w-full  md:w-[40vw] md:h-auto rounded-3xl shadow-2xl  border-2   ">
            <div class="m-4 flex flex-col">
                <h1 class="md:text-lg font-bold">Full name</h1>
                <input class="md:text-lg outline-none w-full border-2 shadow-xl rounded mb-2" type="text" name="name"
                    autocomplete="off" placeholder="Your good name" id="signup_fullname">
                <h1 class="md:text-lg font-bold">Email</h1>
                <input class="md:text-lg outline-none w-full border-2 shadow-xl rounded mb-2" 
                type="email" autocomplete="off" name="Email" placeholder="name@gmail.com"  id="signup_email" required  pattern="[^\s@]+@[^\s@]+\.[^\s@]+" title="Please enter a valid email address">
         

                <h1 class="md:text-lg font-bold">Password</h1>
                <input class="md:text-lg outline-none w-full border-2 shadow-xl rounded  mb-2" type="password" placeholder="Abcd1234" id="signup_password">
                <h1 class="md:text-lg font-bold">Confirm Password</h1>
                <input class="md:text-lg outline-none w-full border-2 shadow-xl rounded  mb-2" type="password"  placeholder="Abcd1234" id="signup_confirmpassword">

                <div class="flex justify-center">
                    <input type="submit" value="Register"
                        class="border-none cursor-pointer shadow-xl rounded-lg p-2 justify-center bg-[#0A6CFF] font-bold text-white"
                        id="signup_btn">
                </div>
            </div>
        </div>
    </main>

    <script>
        let signup_fullname = document.getElementById("signup_fullname")
        let signup_email = document.getElementById("signup_email")
        let signup_password = document.getElementById("signup_password")
        let signup_confirmpassword = document.getElementById("signup_confirmpassword")
        let register_btn = document.getElementById("signup_btn")
        let users = []

        let localstorage = localStorage.getItem('users')

        if (localstorage) {
            users = JSON.parse(localstorage)
        }

        function useremail(email) {
            return users.some(user => user.email === email);
        }


        function submituser() {
            const fullname = signup_fullname.value;
            const email = signup_email.value;
            const password = signup_password.value;
            const confirmpassword = signup_confirmpassword.value;
            console.log(password.length);

            if (fullname === "" || email === "" || password === "" || confirmpassword === "") {
                alert("Please fill all fields");
            } else if (password.length < 8) {
                alert("Week password");
            } else if (password !== confirmpassword) {
                alert('Password does not match');
            } else if (useremail(email)) {
                alert("Email already exists");
            } else {
                const newuser = {
                    fullname,
                    email,
                    password,
                }
                users.push(newuser);
                localStorage.setItem('users', JSON.stringify(users))
                location.replace('./src/signin.html')
            }
        }

        register_btn.addEventListener('click', submituser)
    </script>

</body>

</html>